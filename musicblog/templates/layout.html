<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
   
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='main.css')}}">
    <link rel="stylesheet" href="{{ url_for('static', filename='dropdown.css') }}">

    {% if title %}
        <title class="title">Now Listening - {{ title }}</title>
    {% else %}
        <title class="title">Now Listening</title>
    {% endif %}
</head>
<body>
    <header class="site-header">
        <nav class="navbar navbar-expand-md navbar-dark fixed-top">
          <div class="container">
            <a class="navbar-brand me-4 logo-link" href="{{ url_for('main.home') }}">
              <img 
                src="{{ url_for('static', filename='../static/logo/logo-default.svg') }}" 
                alt="Now Listening Logo"
                class="logo-img">
            </a>
            <button class="navbar-toggler" type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#navbarToggle"
                    aria-controls="navbarToggle"
                    aria-expanded="false"
                    aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarToggle">
              <div class="navbar-nav me-auto">
                <a class="nav-item nav-link" href="{{ url_for('main.home') }}">Home</a>
                <a class="nav-item nav-link" href="{{ url_for('main.about') }}">About</a>
              </div>
              <div class="navbar-nav ms-auto">
                {% if current_user.is_authenticated %}
                  <a class="nav-item nav-link" href="{{ url_for('posts.new_post') }}">New Post</a>
                  <a class="nav-item nav-link" href="{{ url_for('users.account') }}">Account</a>
                  <a class="nav-item nav-link" href="{{ url_for('users.logout') }}">Logout</a>
                {% else %}
                  <a class="nav-item nav-link" href="{{ url_for('users.login') }}">Login</a>
                  <a class="nav-item nav-link" href="{{ url_for('users.register') }}">Register</a>
                {% endif %}
              </div>
            </div>
          </div>
        </nav>
      </header>
      <main role="main" class="container">
        <div class="row">
            <div class="col-md-8">
                {% with messages = get_flashed_messages(with_categories=True) %}
                    {% if messages %}
                        {% for category, message in messages %}
                            <div class="alert alert-{{ category }}">
                                {{ message }}
                            </div>
                        {% endfor %}
                    {% endif %}
                {% endwith %}
                {% block content %}{% endblock %}
            </div>
            <div class="col-md-4">
            <div class="content-section rounded">
                <h3><strong>Library</strong></h3>
                <p class='text-muted'>Explore the latest posts & your personal content</p>
                    <ul class="list-group">
                        <li class="list-group-item list-group-item-light"><a href="{{ url_for('main.home') }}">Latest Posts</a></li>
                        <li class="list-group-item list-group-item-light">
                          {% if current_user.is_authenticated %}
                            <a href="{{ url_for('main.user_posts', username=current_user.username) }}">My Posts</a>
                          {% else %}
                            <a href="{{ url_for('users.login') }}">My Posts</a>
                          {% endif %}
                        </li>
                        <li class="list-group-item list-group-item-light"><a href="{{ url_for('posts.album_ratings') }}">Ratings</a></li>
                    </ul>
                </p>
            </div>
            </div>
        </div>
      </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>    
    
</body>
</html>